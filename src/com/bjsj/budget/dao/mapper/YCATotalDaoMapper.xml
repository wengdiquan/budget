<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bjsj.budget.dao.YCATotalDao">

	<resultMap id="YCATotalInfoMap" type="com.bjsj.budget.model.YCATotalModel">
	</resultMap>
	<sql id="Base_Column_List">
		t.id, t.code, t.type, t.name, t.unit, t.tax_Price,
		t.notax_Price, t.amount, t.tax_Single_SumPrice, t.single_SumPrice
	</sql>
	
    <select id="queryYCATotalInfo" parameterType="HashMap" resultMap="YCATotalInfoMap">
   	 	select 
	   		<include refid="Base_Column_List" /> 
	   	from tm_unitproject_detail t
		inner join tm_lookvalue tl on t.lookvalueid = tl.lookvalue_id
		inner join tm_looktype tlt on tlt.looktype_id = tl.looktype_id 
	    <if test="map.lookTypeId != null">
	    	and tlt.looktype_id = #{map.lookTypeId,jdbcType=INTEGER} 
	    </if>	
    </select>
    <select id="getYCATotalInfoCount" parameterType="HashMap" resultType="Integer">
		select 
	   		count(1) 
	   	from tm_unitproject_detail t
		inner join tm_lookvalue tl on t.lookvalueid = tl.lookvalue_id
		inner join tm_looktype tlt on tlt.looktype_id = tl.looktype_id 
	    <if test="map.lookTypeId != null">
	    	and tlt.looktype_id = #{map.lookTypeId,jdbcType=INTEGER} 
	    </if>
	</select>
    
</mapper>